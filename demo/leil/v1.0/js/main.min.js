$(document).ready(function(){new Slide({el:$("#page-main"),curClass:"page-current",cur:0,direction:"up"}).init();new Slide({el:$("#slide"),curClass:"slide-current",cur:0,direction:"left",repeat:true}).init();$(window).on("load",function(){var a=$("#slide"),b=$("#slide img:first-child").height();a.height(b+1)})});function Slide(a){this.$el=a.el;this.$sels=this.$el.children();this.count=this.$sels.length;this.cur=a.cur||0;this.curClass=a.curClass;this.repeat=a.repeat||false;this.isAnimating=false;this.endCurr=false,this.endNext=false,this.animEndNames="webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd animationend";this.direction=a.direction;this.originalClassList=this.$sels.eq(1).attr("class");return this}Slide.prototype.init=function(){var a=this;if(this.direction==="up"||this.direction==="down"){this.$el.swipe({swipeUp:function(c,f,e,d,b){if(a.cur==a.count-1||a.isAnimating){return false}a.direction="up";a.slideNext("up")},swipeDown:function(c,f,e,d,b){if(a.cur==0||a.isAnimating){return false}a.direction="down";a.slideNext("down")}})}else{this.$el.swipe({swipe:function(c,f,e,d,b){if(a.isAnimating){return false}if(!a.repeat){if(f==="left"){if(a.cur==a.count-1){return false}}else{if(a.cur==0){return false}}}a.direction=f;a.slideNext(f)}});$("#page-main").find(".link-color").on("click",function(){if(a.cur==a.count-1||a.isAnimating){return false}a.direction="left";a.slideNext("left")})}};Slide.prototype.slideNext=function(e){this.isAnimating=true;var d=this,b=this.$sels.eq(this.cur);var c={left:["page-cubeLeftOut page-ontop","page-cubeLeftIn"],right:["page-cubeRightOut page-ontop","page-cubeRightIn"],up:["page-moveToTop page-ontop","page-scaleUp"],down:["page-moveToBottom page-ontop","page-scaleUp"]};if(e==="down"||e==="right"){if(this.repeat){if(d.cur==0){d.cur=d.count-1}else{this.cur--}}else{this.cur--}}else{if(this.repeat){if(d.cur==d.count-1){d.cur=0}else{this.cur++}}else{this.cur++}}var a=this.$sels.eq(this.cur).addClass(this.curClass);b.addClass(c[e][0]).one(d.animEndNames,function(){b.off(d.animEndNames);d.endCurr=true;if(d.endNext){d.onEndAnimation(b,a)}});a.addClass(c[e][1]).one(d.animEndNames,function(){a.off(d.animEndNames);d.endNext=true;if(d.endCurr){d.onEndAnimation(b,a)}})};Slide.prototype.onEndAnimation=function(b,a){this.endCurr=false;this.endNext=false;this.resetPage(b,a);this.isAnimating=false};Slide.prototype.resetPage=function(a,b){a.attr("class",this.originalClassList);b.attr("class",this.originalClassList+" "+this.curClass)};