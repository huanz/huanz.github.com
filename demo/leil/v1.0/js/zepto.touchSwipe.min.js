(function(d){var p="left",o="right",e="up",v="down",b="in",x="out",l="none",r="auto",k="swipe",s="pinch",z="tap",i="doubletap",m="longtap",y="hold",D="horizontal",w="vertical",h="all",A=10,f="start",j="move",g="end",q="cancel",a="ontouchstart" in window,t=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,c=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,B="TouchSwipe";var n={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};d.fn.swipe=function(G){var F=d(this),E=F.data(B);if(E&&typeof G==="string"){if(E[G]){return E[G].apply(this,Array.prototype.slice.call(arguments,1))}else{d.error("Method "+G+" does not exist on Zepto.swipe")}}else{if(!E&&(typeof G==="object"||!G)){return u.apply(this,arguments)}}return F};d.fn.swipe.defaults=n;d.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:j,PHASE_END:g,PHASE_CANCEL:q};d.fn.swipe.directions={LEFT:p,RIGHT:o,UP:e,DOWN:v,IN:b,OUT:x};d.fn.swipe.pageScroll={NONE:l,HORIZONTAL:D,VERTICAL:w,AUTO:r};d.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:h};function u(E){if(E&&(E.allowPageScroll===undefined&&(E.swipe!==undefined||E.swipeStatus!==undefined))){E.allowPageScroll=l}if(E.click!==undefined&&E.tap===undefined){E.tap=E.click}if(!E){E={}}E=d.extend({},d.fn.swipe.defaults,E);return this.each(function(){var G=d(this);var F=G.data(B);if(!F){F=new C(this,E);G.data(B,F)}})}function C(R,az){var aF=(a||c||!az.fallbackToMouseEvents),I=aF?(c?(t?"MSPointerDown":"pointerdown"):"touchstart"):"mousedown",aE=aF?(c?(t?"MSPointerMove":"pointermove"):"touchmove"):"mousemove",Z=aF?(c?(t?"MSPointerUp":"pointerup"):"touchend"):"mouseup",a4=aF?null:"mouseleave",ap=(c?(t?"MSPointerCancel":"pointercancel"):"touchcancel");var am=0,ac=null,aQ=0,V=0,a3=0,J=1,aA=0,aO=0,O=null;var aV=d(R);var af="start";var aW=0;var ab=null;var aZ=0,T=0,P=0,aj=0,S=0;var a0=null,aM=null;try{aV.bind(I,ag);aV.bind(ap,ba)}catch(aq){d.error("events not supported "+I+","+ap+" on Zepto.swipe")}this.enable=function(){aV.bind(I,ag);aV.bind(ap,ba);return aV};this.disable=function(){aP();return aV};this.destroy=function(){aP();aV.data(B,null);return aV};this.option=function(bb,bc){if(az[bb]!==undefined){if(bc===undefined){return az[bb]}else{az[bb]=bc}}else{d.error("Option "+bb+" does not exist on Zepto.swipe.options")}return null};function ag(be){if(aG()){return}if(d(be.target).closest(az.excludedElements,aV).length>0){return}var bd=be.originalEvent?be.originalEvent:be;var bc,bb=a?bd.touches[0]:bd;af=f;if(a){aW=bd.touches.length}else{be.preventDefault()}am=0;ac=null;aO=null;aQ=0;V=0;a3=0;J=1;aA=0;ab=an();O=aR();a6();if(!a||(aW===az.fingers||az.fingers===h)||a1()){ao(0,bb);aZ=aC();if(aW==2){ao(1,bd.touches[1]);V=a3=aD(ab[0].start,ab[1].start)}if(az.swipeStatus||az.pinchStatus){bc=U(bd,af)}}else{bc=false}if(bc===false){af=q;U(bd,af);return bc}else{if(az.hold){aM=setTimeout(d.proxy(function(){aV.trigger("hold",[bd.target]);if(az.hold){bc=az.hold.call(aV,bd,bd.target)}},this),az.longTapThreshold)}av(true)}return null}function a8(bg){var bf=bg.originalEvent?bg.originalEvent:bg;if(af===g||af===q||aH()){return}var bd,bc=a?bf.touches[0]:bf;var be=aL(bc);T=aC();if(a){aW=bf.touches.length}if(az.hold){clearTimeout(aM)}af=j;if(aW==2){if(V==0){ao(1,bf.touches[1]);V=a3=aD(ab[0].start,ab[1].start)}else{aL(bf.touches[1]);a3=aD(ab[0].end,ab[1].end);aO=aB(ab[0].end,ab[1].end)}J=a9(V,a3);aA=Math.abs(V-a3)}if((aW===az.fingers||az.fingers===h)||!a||a1()){ac=aS(be.start,be.end);ar(bg,ac);am=aa(be.start,be.end);aQ=aT();ah(ac,am);if(az.swipeStatus||az.pinchStatus){bd=U(bf,af)}if(!az.triggerOnTouchEnd||az.triggerOnTouchLeave){var bh=true;if(az.triggerOnTouchLeave){var bb=a2(this);bh=K(be.end,bb)}if(!az.triggerOnTouchEnd&&bh){af=aI(j)}else{if(az.triggerOnTouchLeave&&!bh){af=aI(g)}}if(af==q||af==g){U(bf,af)}}}else{af=q;U(bf,af)}if(bd===false){af=q;U(bf,af)}}function E(bc){var bb=bc.originalEvent?bc.originalEvent:bc;if(a){if(bb.touches.length>0){L();return true}}if(aH()){aW=aj}T=aC();aQ=aT();if(M()||!au()){af=q;U(bb,af)}else{if(az.triggerOnTouchEnd||(az.triggerOnTouchEnd==false&&af===j)){bc.preventDefault();af=g;U(bb,af)}else{if(!az.triggerOnTouchEnd&&Q()){af=g;aK(bb,af,z)}else{if(af===j){af=q;U(bb,af)}}}}av(false);return null}function ba(){aW=0;T=0;aZ=0;V=0;a3=0;J=1;a6();av(false)}function F(bc){var bb=bc.originalEvent?bc.originalEvent:bc;if(az.triggerOnTouchLeave){af=aI(g);U(bb,af)}}function aP(){aV.unbind(I,ag);aV.unbind(ap,ba);aV.unbind(aE,a8);aV.unbind(Z,E);if(a4){aV.unbind(a4,F)}av(false)}function aI(bf){var bd=bf;var be=at();var bb=au();var bc=M();if(!be||bc){bd=q}else{if(bb&&bf==j&&(!az.triggerOnTouchEnd||az.triggerOnTouchLeave)){bd=g}else{if(!bb&&bf==g&&az.triggerOnTouchLeave){bd=q}}}return bd}function U(bd,bb){var bc=undefined;if(H()||aY()){bc=aK(bd,bb,k)}else{if((a7()||a1())&&bc!==false){bc=aK(bd,bb,s)}}if(al()&&bc!==false){bc=aK(bd,bb,i)}else{if(ay()&&bc!==false){bc=aK(bd,bb,m)}else{if(aJ()&&bc!==false){bc=aK(bd,bb,z)}}}if(bb===q){ba(bd)}if(bb===g){if(a){if(bd.touches.length==0){ba(bd)}}else{ba(bd)}}return bc}function aK(be,bb,bd){var bc=undefined;if(bd==k){aV.trigger("swipeStatus",[bb,ac||null,am||0,aQ||0,aW,ab]);if(az.swipeStatus){bc=az.swipeStatus.call(aV,be,bb,ac||null,am||0,aQ||0,aW,ab);if(bc===false){return false}}if(bb==g&&X()){aV.trigger("swipe",[ac,am,aQ,aW,ab]);if(az.swipe){bc=az.swipe.call(aV,be,ac,am,aQ,aW,ab);if(bc===false){return false}}switch(ac){case p:aV.trigger("swipeLeft",[ac,am,aQ,aW,ab]);if(az.swipeLeft){bc=az.swipeLeft.call(aV,be,ac,am,aQ,aW,ab)}break;case o:aV.trigger("swipeRight",[ac,am,aQ,aW,ab]);if(az.swipeRight){bc=az.swipeRight.call(aV,be,ac,am,aQ,aW,ab)}break;case e:aV.trigger("swipeUp",[ac,am,aQ,aW,ab]);if(az.swipeUp){bc=az.swipeUp.call(aV,be,ac,am,aQ,aW,ab)}break;case v:aV.trigger("swipeDown",[ac,am,aQ,aW,ab]);if(az.swipeDown){bc=az.swipeDown.call(aV,be,ac,am,aQ,aW,ab)}break}}}if(bd==s){aV.trigger("pinchStatus",[bb,aO||null,aA||0,aQ||0,aW,J,ab]);if(az.pinchStatus){bc=az.pinchStatus.call(aV,be,bb,aO||null,aA||0,aQ||0,aW,J,ab);if(bc===false){return false}}if(bb==g&&N()){switch(aO){case b:aV.trigger("pinchIn",[aO||null,aA||0,aQ||0,aW,J,ab]);if(az.pinchIn){bc=az.pinchIn.call(aV,be,aO||null,aA||0,aQ||0,aW,J,ab)}break;case x:aV.trigger("pinchOut",[aO||null,aA||0,aQ||0,aW,J,ab]);if(az.pinchOut){bc=az.pinchOut.call(aV,be,aO||null,aA||0,aQ||0,aW,J,ab)}break}}}if(bd==z){if(bb===q||bb===g){clearTimeout(a0);clearTimeout(aM);if(aU()&&!G()){S=aC();a0=setTimeout(d.proxy(function(){S=null;aV.trigger("tap",[be.target]);if(az.tap){bc=az.tap.call(aV,be,be.target)}},this),az.doubleTapThreshold)}else{S=null;aV.trigger("tap",[be.target]);if(az.tap){bc=az.tap.call(aV,be,be.target)}}}}else{if(bd==i){if(bb===q||bb===g){clearTimeout(a0);S=null;aV.trigger("doubletap",[be.target]);if(az.doubleTap){bc=az.doubleTap.call(aV,be,be.target)}}}else{if(bd==m){if(bb===q||bb===g){clearTimeout(a0);S=null;aV.trigger("longtap",[be.target]);if(az.longTap){bc=az.longTap.call(aV,be,be.target)}}}}}return bc}function au(){var bb=true;if(az.threshold!==null){bb=am>=az.threshold}return bb}function M(){var bb=false;if(az.cancelThreshold!==null&&ac!==null){bb=(aX(ac)-am)>=az.cancelThreshold}return bb}function ai(){if(az.pinchThreshold!==null){return aA>=az.pinchThreshold}return true}function at(){var bb;if(az.maxTimeThreshold){if(aQ>=az.maxTimeThreshold){bb=false}else{bb=true}}else{bb=true}return bb}function ar(bb,bd){if(az.allowPageScroll===l||a1()){bb.preventDefault()}else{var bc=az.allowPageScroll===r;switch(bd){case p:if((az.swipeLeft&&bc)||(!bc&&az.allowPageScroll!=D)){bb.preventDefault()}break;case o:if((az.swipeRight&&bc)||(!bc&&az.allowPageScroll!=D)){bb.preventDefault()}break;case e:if((az.swipeUp&&bc)||(!bc&&az.allowPageScroll!=w)){bb.preventDefault()}break;case v:if((az.swipeDown&&bc)||(!bc&&az.allowPageScroll!=w)){bb.preventDefault()}break}}}function N(){var bc=ae();var bb=ad();var bd=ai();return bc&&bb&&bd}function a1(){return !!(az.pinchStatus||az.pinchIn||az.pinchOut)}function a7(){return !!(N()&&a1())}function X(){var be=at();var bg=au();var bc=ae();var bb=ad();var bd=M();var bf=!bd&&bb&&bc&&bg&&be;return bf}function aY(){return !!(az.swipe||az.swipeStatus||az.swipeLeft||az.swipeRight||az.swipeUp||az.swipeDown)}function H(){return !!(X()&&aY())}function ae(){return((aW===az.fingers||az.fingers===h)||!a)}function ad(){return ab[0].end.x!==0}function Q(){return !!(az.tap)}function aU(){return !!(az.doubleTap)}function Y(){return !!(az.longTap)}function W(){if(S==null){return false}var bb=aC();return(aU()&&((bb-S)<=az.doubleTapThreshold))}function G(){return W()}function ax(){return((aW===1||!a)&&(isNaN(am)||am<az.threshold))}function a5(){return((aQ>az.longTapThreshold)&&(am<A))}function aJ(){return !!(ax()&&Q())}function al(){return !!(W()&&aU())}function ay(){return !!(a5()&&Y())}function L(){P=aC();aj=event.touches.length+1}function a6(){P=0;aj=0}function aH(){var bb=false;if(P){var bc=aC()-P;if(bc<=az.fingerReleaseThreshold){bb=true}}return bb}function aG(){return !!(aV.data(B+"_intouch")===true)}function av(bb){if(bb===true){aV.bind(aE,a8);aV.bind(Z,E);if(a4){aV.bind(a4,F)}}else{aV.unbind(aE,a8,false);aV.unbind(Z,E,false);if(a4){aV.unbind(a4,F,false)}}aV.data(B+"_intouch",bb===true)}function ao(bc,bb){var bd=bb.identifier!==undefined?bb.identifier:0;ab[bc].identifier=bd;ab[bc].start.x=ab[bc].end.x=bb.pageX||bb.clientX;ab[bc].start.y=ab[bc].end.y=bb.pageY||bb.clientY;return ab[bc]}function aL(bb){var bd=bb.identifier!==undefined?bb.identifier:0;var bc=aN(bd);bc.end.x=bb.pageX||bb.clientX;bc.end.y=bb.pageY||bb.clientY;return bc}function aN(bc){for(var bb=0;bb<ab.length;bb++){if(ab[bb].identifier==bc){return ab[bb]}}}function an(){var bc=[];for(var bb=0;bb<=5;bb++){bc.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return bc}function ah(bc,bb){bb=Math.max(bb,aX(bc));O[bc].distance=bb}function aX(bb){if(O[bb]){return O[bb].distance}return undefined}function aR(){var bb={};bb[p]=aw(p);bb[o]=aw(o);bb[e]=aw(e);bb[v]=aw(v);return bb}function aw(bb){return{direction:bb,distance:0}}function aT(){return T-aZ}function aD(bb,be){var bd=Math.abs(bb.x-be.x);var bc=Math.abs(bb.y-be.y);return Math.round(Math.sqrt(bd*bd+bc*bc))}function a9(bd,bc){var bb=(bc/bd)*1;return bb.toFixed(2)}function aB(){if(J<1){return x}else{return b}}function aa(bb,bc){return Math.round(Math.sqrt(Math.pow(bc.x-bb.x,2)+Math.pow(bc.y-bb.y,2)))}function ak(bc,bd){var bb=bc.x-bd.x;var bg=bd.y-bc.y;var be=Math.atan2(bg,bb);var bf=Math.round(be*180/Math.PI);if(bf<0){bf=360-Math.abs(bf)}return bf}function aS(bb,bc){var bd=ak(bb,bc);if((bd<=45)&&(bd>=0)){return p}else{if((bd<=360)&&(bd>=315)){return p}else{if((bd>=135)&&(bd<=225)){return o}else{if((bd>45)&&(bd<135)){return v}else{return e}}}}}function aC(){var bb=new Date();return bb.getTime()}function a2(bc){bc=d(bc);var bd=bc.offset();var bb={left:bd.left,right:bd.left+bc.outerWidth(),top:bd.top,bottom:bd.top+bc.outerHeight()};return bb}function K(bb,bc){return(bb.x>bc.left&&bb.x<bc.right&&bb.y>bc.top&&bb.y<bc.bottom)}}})(Zepto);